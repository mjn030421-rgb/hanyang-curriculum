import streamlit as st
import pandas as pd
import plotly.express as px

# 1. ì›¹ í˜ì´ì§€ ì œëª© ë° ì„¤ì •
st.set_page_config(page_title="Hanyang Curriculum Link", layout="wide")
st.title("ğŸ“ ì»¤ë¦¬í˜ëŸ¼ ë§í¬ (Curriculum Link)")
st.subheader("ì±„ìš© ê³µê³ (JD) ê¸°ë°˜ ë§ì¶¤í˜• ì „ê³µ ì´ìˆ˜ ê°€ì´ë“œ")

# 2. ì‚¬ì´ë“œë°” - ì±„ìš© ê³µê³  ì…ë ¥
st.sidebar.header("Step 1: ì±„ìš© ê³µê³  ì…ë ¥")
jd_input = st.sidebar.text_area("ëª©í‘œí•˜ëŠ” ê¸°ì—…ì˜ ì±„ìš© ê³µê³ (JD)ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.", 
                               placeholder="ì˜ˆ: ì‹œì„¤ë¬¼ ì•ˆì „ì§„ë‹¨, êµ¬ì¡°ë¬¼ ìœ ì§€ë³´ìˆ˜ ì—”ì§€ë‹ˆì–´...")

# 3. ë©”ì¸ í™”ë©´ - ê°•ì˜ê³„íšì„œ ì—…ë¡œë“œ
st.header("Step 2: ê°•ì˜ê³„íšì„œ ë¶„ì„")
uploaded_file = st.file_uploader("í•™êµì—ì„œ ë°›ì€ ê°•ì˜ê³„íšì„œ(CSV)ë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”.", type="csv")

if uploaded_file is not None:
    # ë°ì´í„° ì½ê¸°
    df = pd.read_csv(uploaded_file)
    
    # ì˜ˆì‹œë¡œ ì£¼ì‹  'êµ¬ì¡°ë¬¼ìœ ì§€ê´€ë¦¬ë°ë³´ìˆ˜ë³´ê°•' ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ë¶„ì„ ë¡œì§ (ê°„ëµí™”)
    st.success("ê°•ì˜ê³„íšì„œ ë¶„ì„ ì™„ë£Œ!")
    
    # 4. ë¶„ì„ ê²°ê³¼ ì‹œê°í™” (ë ˆì´ë” ì°¨íŠ¸ ì˜ˆì‹œ ë°ì´í„°)
    st.header("Step 3: ì§ë¬´ ì í•©ë„ ë¶„ì„ ê²°ê³¼")
    
    # ê°€ìƒì˜ ì—­ëŸ‰ ì ìˆ˜ ë°ì´í„° ìƒì„±
    ability_data = pd.DataFrame(dict(
        r=[85, 90, 70, 60, 80],
        theta=['ì•ˆì „ì§„ë‹¨','ìœ ì§€ë³´ìˆ˜','í’ˆì§ˆê´€ë¦¬','ì„¤ê³„ì´í•´','ë²•ë ¹ì§€ì‹']
    ))
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.write("### ğŸ“Š ì—­ëŸ‰ ë§¤ì¹­ ê·¸ë˜í”„")
        fig = px.line_polar(ability_data, r='r', theta='theta', line_close=True)
        fig.update_traces(fill='toself')
        st.plotly_chart(fig)

    with col2:
        st.write("### ğŸ’¡ AI ì¶”ì²œ í¬ì¸íŠ¸")
        if "ì•ˆì „" in jd_input or "ìœ ì§€" in jd_input:
            st.info("ì´ ê³¼ëª©ì˜ **9ì£¼ì°¨(ì•ˆì „ì ê²€ ë° ì§„ë‹¨)**ì™€ **5-7ì£¼ì°¨(í•˜ì ë¶„ì„ ë° ê°œì„ )** ë‚´ìš©ì´ íƒ€ê²Ÿ ì§ë¬´ì™€ 90% ì¼ì¹˜í•©ë‹ˆë‹¤.")
            st.write("- **ì¶”ì²œ ì•¡ì…˜:** ì´ ê³¼ëª©ì—ì„œ ì§„í–‰í•œ 'ê±´ì¶•ë¬¼ í•˜ì ê°œì„ ë°©ì•ˆ' ì‚¬ë¡€ë¥¼ í¬íŠ¸í´ë¦¬ì˜¤ì— í™œìš©í•˜ì„¸ìš”.")
        else:
            st.warning("JDë¥¼ ì…ë ¥í•˜ì‹œë©´ ìƒì„¸ ì¶”ì²œ ë‚´ìš©ì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.")

    # ì¶”ì²œ ë¡œë“œë§µ í‘œ
    st.write("### ğŸ“… ì¶”ì²œ ìˆ˜ê°• ë¡œë“œë§µ")
    recommend_df = pd.DataFrame({
        "ìˆœìœ„": [1, 2, 3],
        "ê³¼ëª©ëª…": ["êµ¬ì¡°ë¬¼ìœ ì§€ê´€ë¦¬ë°ë³´ìˆ˜ë³´ê°•", "ê±´ì„¤ì¬ë£Œí•™", "êµ¬ì¡°ì—­í•™"],
        "ì§ë¬´ ì í•©ë„ ê¸°ì—¬": ["15% ìƒìŠ¹", "10% ìƒìŠ¹", "8% ìƒìŠ¹"],
        "ë§¤ì¹­ í‚¤ì›Œë“œ": ["í•˜ìë¶„ì„/ë²•ë ¹", "ê±´ì„¤ì¬ë£Œ í’ˆì§ˆ", "êµ¬ì¡°ë¬¼ ì›ë¦¬"]
    })
    st.table(recommend_df)